load("~/UNI/THESIS/Dataset/DGURBA-2020-01M-SH/DGURBA-2020-01M-SH.shp")
#CREATION OF THE DEGURBA CLASSIFICATION FILE
install.packages("sf")
library(sf)
shapefile <- st_read("~/UNI/THESIS/Dataset/DGURBA-2020-01M-SH/DGURBA-2020-01M-SH.shp")
library(dplyr)
library(magrittr)
degurba_units <- shapefile %>%
filter(CNTR_CODE == "IT") %>%
as_tibble()
View(degurba_units)
install.packages("readr")
install.packages("ggplot2")
install.packages("dplyr")
install.packages("tidyr")
install.packages("GGally")
install.packages("stringr")
install.packages("ggstats")
install.packages("MASS")
library(readr)
library(ggplot2)
library(dplyr)
library(tidyr)
library(cowplot)
library(GGally)
library(stringr)
library(ggstats)
library(MASS)
#DATAVIZ#
##packages in packages.R
setwd("~/UNI/THESIS/Poverty-In-Italy-Beyond-the-Rhetoric-of-the-Undeserving-Poor")
#####Data Loading#####
povabslines21 <- read_delim("Dataset/Povertà/povabslines21.csv", delim = ";", escape_double = FALSE, trim_ws = TRUE)
sogliepovrel16_21 <- read_csv("Dataset/Povertà/sogliepovrel16_21.csv",
col_types = cols(`Numero componenti della famiglia` = col_number()))
View(sogliepovrel16_21)
sogliepovrel16_21 <- read_csv("Dataset/Povertà/sogliepovrel16_21.csv",
col_types = cols(NUMEROSITA = col_skip(),
`Numero componenti della famiglia` = col_integer(),
`Seleziona periodo` = col_skip(),
`Flag Codes` = col_skip(), Flags = col_skip()))
povrellines21<-sogliepovrel16_21%>%filter(TIME=="2021")
View(povrellines21)
81.3+7.6+6+5.2
######Poverty Lines######
povlines<-rbind(povabslines21%>%filter(household_size %in% hs)%>%select(-c(familysize,minor_bin)),
povrellines21%>%filter(LINEE_POVERTA=='ALL' & is.na(`Numero componenti della famiglia`)=='FALSE' )%>%select(c(`Numero componenti della famiglia`,Value)))
######Poverty Lines######
povlines<-rbind(povabslines21%>%filter(household_size %in% hs)%>%select(-c(familysize,minor_bin)),
povrellines21%>%filter(LINEE_POVERTA=='ALL' & is.na(`Numero componenti della famiglia`)=='FALSE' )%>%select(c("Numero componenti della famiglia","Value")))
######Poverty Lines######
povlines<-rbind(povabslines21%>%filter(household_size %in% hs)%>%select(-c("familysize","minor_bin")),
povrellines21%>%filter(LINEE_POVERTA=='ALL' & is.na(`Numero componenti della famiglia`)=='FALSE' )%>%select(c("Numero componenti della famiglia","Value")))
unique(povabslines21$household_size)
######Poverty Lines######
hs=c("1componente18-59",
"1comp.60-74",
"1comp.75+" ,
"1comp.11-17_1comp.18-59" ,
"1comp.4-10_1comp.18-59",
"1comp.11-17_2comp.18-59",
"1comp.4-10_2comp.18-59",
"1comp.0-3_2comp.18-59" ,
"1comp.4-10_1comp.11-17_2comp.18-59",
"1comp.0-3_1comp.4-10_2comp.18-59"  ,
"1comp.4-10_2comp.11-17_2comp.18-59",
"2comp.11-17_3comp.18-59"           )
povlines<-rbind(povabslines21%>%filter(household_size %in% hs)%>%select(-c("familysize","minor_bin")),
povrellines21%>%filter(LINEE_POVERTA=='ALL' & is.na(`Numero componenti della famiglia`)=='FALSE' )%>%select(c("Numero componenti della famiglia","Value")))
povabslines21%>%filter(household_size %in% hs)%>%select(-c("familysize","minor_bin"))
povabslines21%>%filter(household_size %in% hs)%>%select(-(c("familysize","minor_bin")))
povabslines21%>%filter(household_size %in% hs)%>%select(-c("familysize","minor_bin"))
view(povabslines21%>%filter(household_size %in% hs)%>%select(-c("familysize","minor_bin")))
x<-povabslines21%>%filter(household_size %in% hs)%>%select(-c("familysize","minor_bin"))
povrellines21%>%filter(LINEE_POVERTA=='ALL' & is.na(`Numero componenti della famiglia`)=='FALSE' )%>%select(c("Numero componenti della famiglia","Value"))
povrellines21%>%filter(LINEE_POVERTA=='ALL' & is.na(`Numero componenti della famiglia`)=='FALSE' )
povrellines21%>%select(c("Numero componenti della famiglia","Value"))
povrellines21%>%select("Numero componenti della famiglia")
povabslines21%>%filter(household_size %in% hs)%>%select("familysize")
povabslines21%>%filter(household_size %in% hs)%>%select(familysize)
povabslines21%>%filter(household_size %in% hs)%>%select(;1:10)
povabslines21%>%filter(household_size %in% hs)%>%select(,1:10)
povabslines21%>%filter(household_size %in% hs)%>%select(1:10)
povabslines21%>%filter(household_size %in% hs)
library(dplyr)
povabslines21%>%filter(household_size %in% hs)%>%select("Value")
povabslines21%>%filter(household_size %in% hs)%>%select("Value")
povabslines21%>%filter(household_size %in% hs)%>%select(Value)
povlines <- povabslines21%>%
filter(household_size %in% hs)%>%
select(-c(minor_bin,familysize))
install.packages("dplyr")
install.packages("dplyr")
library(dplyr)
povlines <- povabslines21%>%
filter(household_size %in% hs)%>%
select(-c(minor_bin,familysize))
typeof(povrellines21)
povabslines21%>%filter(household_size %in% hs)%>% select(Value)
povabslines21%>%filter(household_size %in% hs)%>% select("Value")
povlines <- povabslines21%>%
povlines <- povabslines21%>% filter(household_size %in% hs)%>% select(-c(minor_bin,familysize))
povrellines21%>%filter(LINEE_POVERTA=='ALL' & is.na(`Numero componenti della famiglia`)=='FALSE' )
povrellines21%>%select("Numero componenti della famiglia")
povrellines21%>%select(povrellines21$`Numero componenti della famiglia`)
povrellines21%>%select(`Numero componenti della famiglia`)
install.packages("tidyverse")
library(tidyverse)
povrellines21%>%select(`Numero componenti della famiglia`)
povabslines21%>%filter(household_size %in% hs)%>% select(-c(minor_bin,familysize))
install.packages("dplyr")
install.packages("dplyr")
library(dplyr)
povlines<-rbind(povabslines21%>%filter(household_size %in% hs)%>%select(-c("familysize","minor_bin")),
povrellines21%>%filter(LINEE_POVERTA=='ALL' & is.na(`Numero componenti della famiglia`)=='FALSE' )%>%select(c("Numero componenti della famiglia","Value")))
povlines<-povabslines21%>%filter(household_size %in% hs)%>%select(-c("familysize","minor_bin"))
View(povlines)
povlines21%>%povrellines21%>%filter(LINEE_POVERTA=='ALL' & is.na(`Numero componenti della famiglia`)=='FALSE' )%>%select(c("Numero componenti della famiglia","Value"))
povlines21<-povrellines21%>%filter(LINEE_POVERTA=='ALL' & is.na(`Numero componenti della famiglia`)=='FALSE' )%>%select(c("Numero componenti della famiglia","Value"))
View(povlines21)
povlines21<-cbind(povlines21$Value,povlines21$Value,povlines21$Value,povlines21$Value,povlines21$Value,povlines21$Value,povlines21$Value,povlines21$Value)
povlines21<-povrellines21%>%filter(LINEE_POVERTA=='ALL' & is.na(`Numero componenti della famiglia`)=='FALSE' )%>%select(c("Numero componenti della famiglia","Value"))
povlines21<-cbind(povlines21,povlines21$Value,povlines21$Value,povlines21$Value,povlines21$Value,povlines21$Value,povlines21$Value,povlines21$Value,povlines21$Value)
View(povlines21)
povlines21<-rbind(povlines21,
povabslines21%>%filter(household_size %in% hs)%>%select(-c("familysize","minor_bin")))
colnames(povlines21)<-colnames(povabslines21[1:10])
povlines21<-rbind(povlines21,
povabslines21%>%filter(household_size %in% hs)%>%select(-c("familysize","minor_bin")))
parcoord(povlines21[,2:10])
MASS::parcoord(povlines21[,2:10])
MASS::parcoord(povlines21[,2:10])
MASS::parcoord(povlines21[,2:10], var.label=TRUE)
ggparcoord(povlines21,
columns = 2:10, groupColumn = 5,
showPoints = TRUE,
title = "Absolute and relative poverty lines",
alphaLines = 0.3
) +
scale_color_viridis(discrete=TRUE) +
theme_ipsum()+
theme(
plot.title = element_text(size=10)
)
ggplot2::ggparcoord(povlines21,
columns = 2:10, groupColumn = 5,
showPoints = TRUE,
title = "Absolute and relative poverty lines",
alphaLines = 0.3
) +
scale_color_viridis(discrete=TRUE) +
theme_ipsum()+
theme(
plot.title = element_text(size=10)
)
GGally::ggparcoord(povlines21,
columns = 2:10, groupColumn = 5,
showPoints = TRUE,
title = "Absolute and relative poverty lines",
alphaLines = 0.3
)
GGally::ggparcoord(povlines21,
columns = 2:10,
showPoints = TRUE,
title = "Absolute and relative poverty lines",
alphaLines = 0.3
)
GGally::ggparcoord(povlines21,
columns = 2:10,
showPoints = TRUE,
title = "Absolute and relative poverty lines",
alphaLines = 0.3
) +
scale_y_continuous()
ggparcoord(povlines21,
columns = 2:10,
showPoints = TRUE,
title = "Absolute and relative poverty lines",
alphaLines = 0.3,
scale="globalminmax"
)
GGally::ggparcoord(povlines21,
columns = 2:10,
showPoints = TRUE,
title = "Absolute and relative poverty lines",
alphaLines = 0.3,
scale="globalminmax"
)
GGally::ggparcoord(povlines21,
columns = 2:10,
showPoints = TRUE,
groupColumn = 1,
title = "Absolute and relative poverty lines",
alphaLines = 0.3,
scale="globalminmax"
)
GGally::ggparcoord(povlines21,
columns = 2:10,
showPoints = TRUE,
groupColumn = 1,
title = "Absolute and relative poverty lines",
alphaLines = 0.3,
scale="globalminmax"
) +
scale_shape_manual(values=c(1:5))
GGally::ggparcoord(povlines21,
columns = 2:10,
showPoints = TRUE,
groupColumn = 1,
title = "Absolute and relative poverty lines",
alphaLines = 0.3,
scale="globalminmax",
shadeBox = TRUE
)
GGally::ggparcoord(povlines21,
columns = 2:10,
showPoints = TRUE,
groupColumn = 1,
title = "Absolute and relative poverty lines",
alphaLines = 0.3,
scale="globalminmax",
shadeBox = "blue"
)
GGally::ggparcoord(povlines21,
columns = 2:10,
showPoints = TRUE,
groupColumn = 1,
title = "Absolute and relative poverty lines",
alphaLines = 0.3,
scale="globalminmax"
)
GGally::ggparcoord(povlines21,
columns = 2:10,
showPoints = TRUE,
groupColumn = 1,
title = "Absolute and relative poverty lines",
alphaLines = 0.3,
scale="globalminmax"
) +
theme(
axis.title.y = element_blank(),
axis.title.x = element_blank(),
panel.background = element_blank()
)
GGally::ggparcoord(povlines21,
columns = 2:10,
showPoints = TRUE,
groupColumn = 1,
title = "Absolute and relative poverty lines",
alphaLines = 0.3,
scale="globalminmax"
)
gpovlines<-GGally::ggparcoord(povlines21,
columns = 2:10,
showPoints = TRUE,
groupColumn = 1,
title = "Absolute and relative poverty lines",
alphaLines = 0.3,
scale="globalminmax"
)
gpovlines

install.packages("readr")
install.packages("ggplot2")
install.packages("dplyr")
install.packages("tidyr")
install.packages("GGally")
install.packages("stringr")
library(readr)
library(ggplot2)
library(dplyr)
library(tidyr)
library(cowplot)
library(GGally)
library(stringr)
#DATAVIZ#
##packages in packages.R
setwd("~/UNI/THESIS/Poverty-In-Italy-Beyond-the-Rhetoric-of-the-Undeserving-Poor")
#####Data Loading#####
povabslines21 <- read_delim("Dataset/Povertà/povabslines21.csv", delim = ";", escape_double = FALSE, trim_ws = TRUE)
View(povabslines21)
load("~/UNI/THESIS/Poverty-In-Italy-Beyond-the-Rhetoric-of-the-Undeserving-Poor/Dataset/Povertà/population2021.csv")
pop2021 <- read_csv("Dataset/Povertà/population2021.csv",
col_types = cols(TIPO_DATO15 = col_skip(),
SEXISTAT1 = col_skip(), `Seleziona periodo` = col_skip()))
View(pop2021)
unique(pop2021$`Tipo di indicatore demografico`)
pop2021<- pop2021%>%filter(Flags!='p')
unique(pop2021$`Tipo di indicatore demografico`)
pop2021 <- read_csv("Dataset/Povertà/population2021.csv",
col_types = cols(TIPO_DATO15 = col_skip(),
SEXISTAT1 = col_skip(), `Seleziona periodo` = col_skip()))
pop2021<- pop2021%>%filter(Flags != "p")
pop2021 <- read_csv("Dataset/Povertà/population2021.csv",
col_types = cols(TIPO_DATO15 = col_skip(),
SEXISTAT1 = col_skip(), `Seleziona periodo` = col_skip()))
pop2021<- pop2021%>%filter(Flags =="")
pop2021 <- read_csv("Dataset/Povertà/population2021.csv",
col_types = cols(TIPO_DATO15 = col_skip(),
SEXISTAT1 = col_skip(), `Seleziona periodo` = col_skip()))
unique(pop2021$`Flag Codes`)
unique(pop2021$Flags)
pop2021<- pop2021%>%filter(is.na(Flags)==TRUE)
pop2021<- pop2021%>%filter(is.na(Flags)==TRUE & `Tipo di indicatore demografico`!="popolazione inizio periodo")
unique(pop2021$Territorio)
trentino <- pop2021%>% filter(Territorio %in% c("Provincia Autonoma Bolzano / Bozen","Provincia Autonoma Trento"))%>%rowsum()
View(pop2021)
pop2021<- pop2021%>%filter(is.na(Flags)==TRUE & `Tipo di indicatore demografico`!="popolazione inizio periodo")%>%select(-c("Flags","Flag Codes"))
#trentino <- pop2021%>% filter(Territorio %in% c("Provincia Autonoma Bolzano / Bozen","Provincia Autonoma Trento"))%>%rowsum()
trentino <- pop2021%>%
filter(Territorio %in% c("Provincia Autonoma Bolzano / Bozen","Provincia Autonoma Trento"))%>%
group_by(`Tipo di indicatore demografico`,Sesso,TIME)%>%
summarise(ITTER107="TAT",
Territorio="Trentino Alto Adige",
Value=sum())
View(trentino)
#trentino <- pop2021%>% filter(Territorio %in% c("Provincia Autonoma Bolzano / Bozen","Provincia Autonoma Trento"))%>%rowsum()
trentino <- pop2021%>%
filter(Territorio %in% c("Provincia Autonoma Bolzano / Bozen","Provincia Autonoma Trento"))%>%
group_by(`Tipo di indicatore demografico`,Sesso)%>%
summarise(ITTER107="TAT",
Territorio="Trentino Alto Adige",
TIME="2021",
Value=sum())
#trentino <- pop2021%>% filter(Territorio %in% c("Provincia Autonoma Bolzano / Bozen","Provincia Autonoma Trento"))%>%rowsum()
trentino <- pop2021%>%
filter(Territorio %in% c("Provincia Autonoma Bolzano / Bozen","Provincia Autonoma Trento"))%>%
group_by(`Tipo di indicatore demografico`,Sesso)%>%
summarise(ITTER107="TAT",
Territorio="Trentino Alto Adige",
TIME="2021",
Value=sum(Value))
pop2021<- pop2021%>%filter(is.na(Flags)==TRUE & `Tipo di indicatore demografico`!="popolazione inizio periodo")%>%select(-c("Flags","Flag Codes"))%>%filter(TIME=="2021")
pop2021 <- read_csv("Dataset/Povertà/population2021.csv",
col_types = cols(TIPO_DATO15 = col_skip(),
SEXISTAT1 = col_skip(), `Seleziona periodo` = col_skip()))
pop2021<- pop2021%>%filter(is.na(Flags)==TRUE & `Tipo di indicatore demografico`!="popolazione inizio periodo")%>%select(-c("Flags","Flag Codes"))%>%filter(TIME=="2021")
trentino <- pop2021%>%
filter(Territorio %in% c("Provincia Autonoma Bolzano / Bozen","Provincia Autonoma Trento"))%>%
group_by(`Tipo di indicatore demografico`,Sesso)%>%
summarise(ITTER107="TAT",
Territorio="Trentino Alto Adige",
TIME="2021",
Value=sum(Value))
pop2021<-rbind(pop2021,trentino)
unique(pop2021$`Tipo di indicatore demografico`)
######Context: population 2021#####
popplot = ggplot()+
geom_bar(data=pop21%>%filter(`Tipo di indicatore demografico`=="numero di famiglie al 31 dicembre") ,
aes(x=Territorio,y=Value ))
######Context: population 2021#####
popplot = ggplot()+
geom_bar(data=pop2021%>%filter(`Tipo di indicatore demografico`=="numero di famiglie al 31 dicembre") ,
aes(x=Territorio,y=Value ))
popplot
######Context: population 2021#####
popplot = ggplot()+
geom_col(data=pop2021%>%filter(`Tipo di indicatore demografico`=="numero di famiglie al 31 dicembre") ,
aes(x=Territorio,y=Value ))
popplot
######Context: population 2021#####
popplot = ggplot()+
geom_col(data=pop2021%>%filter(`Tipo di indicatore demografico`=="numero di famiglie al 31 dicembre") ,
aes(x=Territorio,y=Value ))+
coord_flip()
popplot
######Context: population 2021#####
popplot = ggplot()+
geom_col(data=pop2021%>%filter(`Tipo di indicatore demografico`=="numero di famiglie al 31 dicembre") ,
aes(x=reorder(Territorio,Value),y=Value ))+
coord_flip()
popplot
nord <- pop2021%>%
filter(Territorio %in% c("Nord-ovest","Nord-est"))%>%
group_by(`Tipo di indicatore demografico`,Sesso)%>%
summarise(ITTER107="N",
Territorio="Nord",
TIME="2021",
Value=sum(Value))
pop2021<-rbind(pop2021,trentino,nord)%>%filter(!(Territorio %in% c("Provincia Autonoma Bolzano / Bozen","Provincia Autonoma Trento","Nord-ovest","Nord-est")) )
######Context: population 2021#####
popplot = ggplot()+
geom_col(data=pop2021%>%filter(`Tipo di indicatore demografico`=="numero di famiglie al 31 dicembre") ,
aes(x=reorder(Territorio,Value),y=Value ))+
coord_flip()
popplot
pop2021 <- read_csv("Dataset/Povertà/population2021.csv",
col_types = cols(TIPO_DATO15 = col_skip(),
SEXISTAT1 = col_skip(), `Seleziona periodo` = col_skip()))
pop2021<- pop2021%>%filter(is.na(Flags)==TRUE & `Tipo di indicatore demografico`!="popolazione inizio periodo")%>%select(-c("Flags","Flag Codes"))%>%filter(TIME=="2021")
trentino <- pop2021%>%
filter(Territorio %in% c("Provincia Autonoma Bolzano / Bozen","Provincia Autonoma Trento"))%>%
group_by(`Tipo di indicatore demografico`,Sesso)%>%
summarise(ITTER107="TAT",
Territorio="Trentino Alto Adige",
TIME="2021",
Value=sum(Value))
nord <- pop2021%>%
filter(Territorio %in% c("Nord-ovest","Nord-est"))%>%
group_by(`Tipo di indicatore demografico`,Sesso)%>%
summarise(ITTER107="N",
Territorio="Nord",
TIME="2021",
Value=sum(Value))
mezzogiorno <- pop2021%>%
filter(Territorio %in% c("Sud","Isole"))%>%
group_by(`Tipo di indicatore demografico`,Sesso)%>%
summarise(ITTER107="S",
Territorio="Mezzogiorno",
TIME="2021",
Value=sum(Value))
pop2021<-rbind(pop2021,trentino,nord,mezzogiorno)%>%filter(!(Territorio %in% c("Provincia Autonoma Bolzano / Bozen","Provincia Autonoma Trento","Nord-ovest","Nord-est","Sud", "Isole")) )
######Context: population 2021#####
popplot = ggplot()+
geom_col(data=pop2021%>%filter(`Tipo di indicatore demografico`=="numero di famiglie al 31 dicembre") ,
aes(x=reorder(Territorio,Value),y=Value ))+
coord_flip()
popplot
######Context: population 2021#####
popplot = ggplot()+
geom_col(data=pop2021%>%filter(`Tipo di indicatore demografico`=="numero di famiglie al 31 dicembre"&Territorio %in% c("Italia","Nord","Centro","Mezzogiorno")) ,
aes(x=reorder(Territorio,Value),y=Value ))+
coord_flip()
popplot
unique(pop2021$`Tipo di indicatore demografico`)
######Context: population 2021#####
popplot = ggplot()+
geom_col(data=pop2021%>%filter(`Tipo di indicatore demografico`=="numero di famiglie al 31 dicembre"&Territorio %in% c("Italia","Nord","Centro","Mezzogiorno")) ,
aes(x=reorder(Territorio,Value),y=Value ))+
geom_col(data=pop2021%>%filter(`Tipo di indicatore demografico`=="popolazione al 31 dicembre"&Sesso=="totale"&Territorio %in% c("Italia","Nord","Centro","Mezzogiorno")) ,
aes(x=reorder(Territorio,Value),y=Value ))+
scale_y_continuous(
name="Number of households",
sec.axis = sec.axis(name="Population")
)
######Context: population 2021#####
popplot = ggplot()+
geom_col(data=pop2021%>%filter(`Tipo di indicatore demografico`=="numero di famiglie al 31 dicembre"&Territorio %in% c("Italia","Nord","Centro","Mezzogiorno")) ,
aes(x=reorder(Territorio,Value),y=Value ))+
geom_col(data=pop2021%>%filter(`Tipo di indicatore demografico`=="popolazione al 31 dicembre"&Sesso=="totale"&Territorio %in% c("Italia","Nord","Centro","Mezzogiorno")) ,
aes(x=reorder(Territorio,Value),y=Value ))+
scale_y_continuous(
name="Number of households",
sec.axis = sec_axis(name="Population")
)
popshareh = ggplot(data=pop2021%>%filter(`Tipo di indicatore demografico`=="numero di famiglie al 31 dicembre"&Territorio %in% c("Nord","Centro","Mezzogiorno")),aes(x=Territorio,y=Value))
popshareh = ggplot(data=pop2021%>%filter(`Tipo di indicatore demografico`=="numero di famiglie al 31 dicembre"&Territorio %in% c("Nord","Centro","Mezzogiorno")),
aes(x=Territorio,y=Value))
popshareh = ggplot(data=pop2021%>%filter(`Tipo di indicatore demografico`=="numero di famiglie al 31 dicembre"&Territorio %in% c("Nord","Centro","Mezzogiorno")),
aes(x=Territorio,y=Value))+
geom_bar(stat="identity", position="stack")
popshareh
popshareh = ggplot(data=pop2021%>%filter(Territorio %in% c("Nord","Centro","Mezzogiorno")),
aes(x=`Tipo di indicatore demografico`,y=Value,fill=Territorio))+
geom_bar(stat="identity", position="stack")
popshareh
popshareh = ggplot(data=pop2021%>%filter(Territorio %in% c("Nord","Centro","Mezzogiorno")),
aes(x=`Tipo di indicatore demografico`,y=Value,fill=Territorio))+
geom_bar(stat="percentage", position="stack")
ggplot2::stat()
popshareh = ggplot(data=pop2021%>%filter(Territorio %in% c("Nord","Centro","Mezzogiorno")),
aes(x=`Tipo di indicatore demografico`,y=Value,fill=Territorio))+
geom_bar(stat="prop", position="stack")
popshareh
popshareh = ggplot(data=pop2021%>%filter(Territorio %in% c("Nord","Centro","Mezzogiorno")),
aes(x=`Tipo di indicatore demografico`,y=Value,fill=Territorio))+
#geom_bar(stat="prop", position="stack")
popshareh
popshareh = ggplot(data=pop2021%>%filter(Territorio %in% c("Nord","Centro","Mezzogiorno")),
aes(x=`Tipo di indicatore demografico`,y=Value,fill=Territorio))
#geom_bar(stat="prop", position="stack")
popshareh
popshareh = ggplot(data=pop2021%>%filter(Territorio %in% c("Nord","Centro","Mezzogiorno")),
aes(x=`Tipo di indicatore demografico`,y=Value,fill=Territorio))
geom_bar(position="stack")
popshareh = ggplot(data=pop2021%>%filter(Territorio %in% c("Nord","Centro","Mezzogiorno")),
aes(x=`Tipo di indicatore demografico`,y=Value,fill=Territorio))
geom_bar()
popshareh = ggplot(data=pop2021%>%filter(Territorio %in% c("Nord","Centro","Mezzogiorno")),
aes(x=`Tipo di indicatore demografico`,y=Value,fill=Territorio))+
geom_bar()
popshareh
popshareh = ggplot(data=pop2021%>%filter(Territorio %in% c("Nord","Centro","Mezzogiorno")),
aes(x=`Tipo di indicatore demografico`,y=Value,fill=Territorio))+
geom_bar(position="stack")
popshareh
popshareh = ggplot(data=pop2021%>%filter(Territorio %in% c("Nord","Centro","Mezzogiorno"))+
popshareh
popshareh = ggplot(data=pop2021%>%filter(Territorio %in% c("Nord","Centro","Mezzogiorno")))+
geom_bar(aes(x=`Tipo di indicatore demografico`,y=Value,fill=Territorio),position="stack")
popshareh = ggplot(data=pop2021%>%filter(Territorio %in% c("Nord","Centro","Mezzogiorno")))+
geom_bar(aes(x=`Tipo di indicatore demografico`,y=Value,fill=Territorio),stat="prop",position="fill")
popshareh
popshareh = ggplot(data=pop2021%>%filter(Territorio %in% c("Nord","Centro","Mezzogiorno")))+
geom_col(aes(x=`Tipo di indicatore demografico`,y=Value,fill=Territorio),stat="prop",position="fill")
popshareh
popshare_area = ggplot(data=pop2021%>%filter(Territorio %in% c("Nord","Centro","Mezzogiorno")))+
geom_col(aes(x=`Tipo di indicatore demografico`,y=Value,fill=Territorio),position="fill")+
coord_flip()
popshare_area
popshare_area = ggplot(data=pop2021%>%filter(Territorio %in% c("Nord","Centro","Mezzogiorno")))+
geom_col(aes(x=`Tipo di indicatore demografico`,y=Value,fill=as.factor(Territorio,levels=clevels=c("Nord", "Centro", "Mezzogiorno"))),position="fill")+
coord_flip()
popshare_area
popshare_area = ggplot(data=pop2021%>%filter(Territorio %in% c("Nord","Centro","Mezzogiorno")))+
geom_col(aes(x=`Tipo di indicatore demografico`,y=Value,fill=as.factor(Territorio,levels=clevels=c("Nord", "Centro", "Mezzogiorno"))),
position="fill")+
geom_text(stat = "prop", position = position_fill(.5))+
coord_flip()
popshare_area
popshare_area = ggplot(data=pop2021%>%filter(Territorio %in% c("Nord","Centro","Mezzogiorno")))+
geom_col(aes(x=`Tipo di indicatore demografico`,y=Value,fill=as.factor(Territorio,levels=clevels=c("Nord", "Centro", "Mezzogiorno"))),
position="fill")+
geom_text(stat = "prop")+
coord_flip()
popshare_area
install.packages("ggstats")
library(ggstats)
popshare_area = ggplot(data=pop2021%>%filter(Territorio %in% c("Nord","Centro","Mezzogiorno")))+
geom_col(aes(x=`Tipo di indicatore demografico`,y=Value,fill=as.factor(Territorio,levels=clevels=c("Nord", "Centro", "Mezzogiorno"))),
position="fill")+
geom_text(stat = "prop")+
coord_flip()
popshare_area = ggplot(data=pop2021%>%filter(Territorio %in% c("Nord","Centro","Mezzogiorno")))+
geom_col(aes(x=`Tipo di indicatore demografico`,y=Value,fill=as.factor(Territorio,levels=clevels=c("Nord", "Centro", "Mezzogiorno")),position="fill"))+
geom_text(stat = "prop")+
coord_flip()
rlang::last_trace()
popshare_area = ggplot(data=pop2021%>%filter(Territorio %in% c("Nord","Centro","Mezzogiorno")))+
geom_col(aes(x=`Tipo di indicatore demografico`,y=Value,fill=as.factor(Territorio,levels=clevels=c("Nord", "Centro", "Mezzogiorno")),position="fill"))+
geom_text(ggstats::stat = "prop")+
coord_flip()
popshare_area
popshare_area = ggplot(data=pop2021%>%filter(Territorio %in% c("Nord","Centro","Mezzogiorno")))+
geom_col(aes(x=`Tipo di indicatore demografico`,y=Value,fill=as.factor(Territorio,levels=clevels=c("Nord", "Centro", "Mezzogiorno")),position="fill"))+
geom_text(ggstats::stat = "prop",position = position_fill(.5))+
coord_flip()
popshare_area
popshare_area = ggplot(data=pop2021%>%filter(Territorio %in% c("Nord","Centro","Mezzogiorno")))+
geom_col(aes(x=`Tipo di indicatore demografico`,y=Value,fill=as.factor(Territorio,levels=clevels=c("Nord", "Centro", "Mezzogiorno")),position="fill"))+
geom_text(ggstats::stat = "prop",position = position_fill(.5))
popshare_area = ggplot(data=pop2021%>%filter(Territorio %in% c("Nord","Centro","Mezzogiorno")))+
geom_col(aes(x=`Tipo di indicatore demografico`,y=Value,fill=as.factor(Territorio,levels=c("Nord", "Centro", "Mezzogiorno")),position="fill"))+
geom_text(ggstats::stat = "prop",position = position_fill(.5))
popshare_area = ggplot(data=pop2021%>%filter(Territorio %in% c("Nord","Centro","Mezzogiorno")))+
geom_col(aes(x=`Tipo di indicatore demografico`,y=Value,fill=as.factor(Territorio,levels=c("Nord", "Centro", "Mezzogiorno")),position="fill"))+
geom_text(ggstats::stat = "prop",position = position_fill(.5))
popshare_area
